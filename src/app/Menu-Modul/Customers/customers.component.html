<header
  [menuTitle]="loginState.menuTitle"
  [isLoggedIn]="loginState.isLoggedIn"
  [userEmail]="email"
></header>
<div #table class="ml-5 mt-3">
  <div class="d-flex col-6">
    <div class="flex-grow-1">
      <mat-form-field class="">
        <input
          matInput
          (keyup)="applyFilter($event.target.value)"
          placeholder="Filter"
        />
      </mat-form-field>
    </div>
    <div class="bd-highlight">
      <button routerLink="/customerAdd" mat-icon-button color="primary">
        <mat-icon class="">add</mat-icon>
      </button>
    </div>
  </div>

  <!-- TABLE -->
  <div class="mat-elevation-z8 col-9">
    <table mat-table [dataSource]="dataSource" matSort>
      <!-- ID Column -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
        <td mat-cell *matCellDef="let row">{{ row.customerId }}</td>
      </ng-container>

      <!-- Progress Column -->
      <ng-container matColumnDef="ad">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Ad</th>
        <td mat-cell *matCellDef="let row">{{ row.name }}</td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="soyad">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Soyad</th>
        <td mat-cell *matCellDef="let row">{{ row.surname }}</td>
      </ng-container>

      <!-- Color Column -->
      <ng-container matColumnDef="bakiye">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Bakiye</th>
        <td mat-cell *matCellDef="let row" [style.color]="row.color">
          {{ row.totalDept }} TL
        </td>
      </ng-container>

      <!-- Color Column -->
      <ng-container matColumnDef="limit">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Limit</th>
        <td mat-cell *matCellDef="let row" >
          {{ row.limit }} TL
        </td>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="işlemler">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>İşlemler</th>
        <td mat-cell *matCellDef="let row">
          <button
            (click)="openDialog()"
            *ngIf="row.customerId == selectedRowId && toggle"
            mat-icon-button
          >
            <mat-icon class="anim">delete</mat-icon>
          </button>
          <button
            (click)="openUpdateDialog(row)"
            *ngIf="row.customerId == selectedRowId && toggle"
            mat-icon-button
          >
            <mat-icon class="anim">cached</mat-icon>
          </button>
          <button
            [routerLink]="['/customerDetails', row.id]"
            [queryParams]="{ name: row.name, surname: row.surname }"
            *ngIf="row.customerId == selectedRowId && toggle"
            mat-stroked-button
            color="primary"
            color="primary"
          >
            Details
          </button>
        </td>
      </ng-container>
      <!-- Date Column -->
      <!-- <ng-container matColumnDef="tarih">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Tarih </th>
        <td mat-cell *matCellDef="let row" [style.color]="row.color"> {{row.tarih | date}} </td>
      </ng-container> -->

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns"
        (click)="clickOnListItem(row)"
        [ngClass]="{
          'data-selected': row.customerId === selectedRowId && toggle
        }"
      ></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
    <!-- TABLE -->
  </div>
</div>
